<div class="dashboard-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Client Insights</h1>
  </div>

  <!-- Filter and Control Bar -->
  <div class="controls-bar">
    <div class="filter-section">
      <div class="filter-dropdown">
        <span class="filter-label">+ Choose filter</span>
      </div>

      <div class="filter-tabs">
        <button 
          *ngFor="let filter of filters"
          class="filter-tab"
          [class.active]="selectedFilter === filter"
          (click)="onFilterChange(filter)">
          {{ filter }}
        </button>
      </div>

      <div class="date-range">
        <input 
          type="date" 
          [(ngModel)]="dateRange.from" 
          (change)="onDateRangeChange()"
          class="date-input">
        <span class="date-separator">-</span>
        <input 
          type="date" 
          [(ngModel)]="dateRange.to" 
          (change)="onDateRangeChange()"
          class="date-input">
      </div>

      <button class="comparison-btn" (click)="addComparison()">
        Add comparison
      </button>
      
      <button class="generate-btn" (click)="generateReport()">
        Generate
      </button>
    </div>

    <div class="legend-section">
      <div class="legend-item" *ngFor="let item of legendData">
        <div class="legend-dot" [style.background-color]="item.color"></div>
        <span class="legend-value">{{ item.value }}</span>
      </div>
    </div>
  </div>

  <!-- Line Graph -->
  <div class="chart-section">
    <div class="chart-container">
      <div class="line-chart">
        <div class="chart-area">
          <!-- Y-axis labels -->
          <div class="y-axis">
            <div class="y-label" *ngFor="let label of yAxisLabels">
              {{ label }}
            </div>
          </div>

          <!-- Chart line -->
          <div class="chart-line">
            <svg width="100%" height="100%" viewBox="0 0 800 200">
              <polyline
                [attr.points]="getChartPoints()"
                fill="none"
                stroke="#20B2AA"
                stroke-width="3"
              />
              <circle
                *ngFor="let point of getChartPointsArray()"
                [attr.cx]="point.x"
                [attr.cy]="point.y"
                r="4"
                fill="#20B2AA"
                stroke="white"
                stroke-width="2"
              />
            </svg>
          </div>

          <!-- X-axis labels -->
          <div class="x-axis">
            <div class="x-label" *ngFor="let data of analyticsData.sales">
              {{ data.month }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Customer Performance Table -->
  <div class="table-section">
    <div class="table-container">
      <table class="performance-table">
        <thead>
          <tr>
            <th>Customer</th>
            <th>Sales</th>
            <th>Orders</th>
            <th>Average order...</th>
            <th>Frequency</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customerData">
            <td class="customer-cell">
              <div class="customer-indicator" [style.background-color]="customer.color"></div>
              {{ customer.name }}
            </td>
            <td class="sales-cell">{{ customer.sales | number }}</td>
            <td class="orders-cell">{{ customer.orders }}</td>
            <td class="avg-order-cell">{{ customer.averageOrder | number }}</td>
            <td class="frequency-cell">{{ customer.frequency }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="summary-row">
            <td><strong>Amount of stores: {{ summaryTotals.totalStores }}</strong></td>
            <td><strong>Total: {{ summaryTotals.totalSales | number }}</strong></td>
            <td><strong>{{ summaryTotals.totalOrders | number }}</strong></td>
            <td><strong>{{ summaryTotals.averageOrder | number }}</strong></td>
            <td><strong>{{ summaryTotals.averageFrequency }}</strong></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <!-- Annotations -->
  <div class="annotations">
    <div class="annotation-item">
      <span>GRAPHIC (filters): sales orders</span>
    </div>
    <div class="annotation-item">
      <span>LIST (Filters)</span>
    </div>
  </div>
</div>